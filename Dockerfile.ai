# Dockerfile.ai

FROM python:3.11-slim

WORKDIR /app

RUN apt-get update && apt-get install -y \
    build-essential \
    && rm -rf /var/lib/apt/lists/*

COPY ./ai/requirements.txt /app/requirements.txt

RUN pip install --no-cache-dir -r requirements.txt

COPY ai/. .

# Hem API hem arka plan daily job çalışır!
CMD /bin/sh -c "uvicorn src.ai_api:app --host 0.0.0.0 --port 5000 & while true; do sleep 86400; echo \"[CRON] \$(date): processing blog title\"; python ai/scripts/dispatch_one_job.py; done"